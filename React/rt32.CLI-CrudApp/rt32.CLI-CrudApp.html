<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Mobile Project</title>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">

    <!-- CSS import -->
    <link rel="stylesheet" href="../css/reset.css">

</head>
<body>

    <div style="margin-top: 40px;">
        <a href="#" onClick="window.open('../../ES2016문법/ap01.docs/npm사용법.html','npm사용법','width=800,height=400,toolbar=no,menubar=no,scrollbars=no,resizable=yes');return false;" rel="nofollow">npm 사용법</a>
    </div>

    <xmp>
        React CLI 을 사용하여 Crud 어플리케이션을 만들어 본다.


        1. 프로젝트 생성 작업
            step 1-01. 프로젝트 생성
                $ npx create-react-app crudprj01  # 프로젝트명은 소문자로 만들어야 함.
                $ ls                              # crudprj01 폴더가 보이는지 확인
                $ cd crudprj01                    # crudprj01 폴더로 이동
                $ ls                              # package.json 파일이 보이는지 확인
                $ npm run start                   # package.json 파일이 보이면 서버 실행


        step 1-02. prop-types 설치(필수)
            컴포넌트 속성값, props 의 타입을 정의할 때 사용되는 라이브러리.
            $ npm install --save prop-types


        step 1-03. 리액트 라우터 설치(필수)
            react-router-dom: 브라우저에서 사용되는 react-router 라이브러리 . 필수
            react-router-redux: 리덕스를 사용하여 라우터 처리하는 라이브러리. 선택
            $ npm install --save react-router-dom history
            $ npm install --save react-router-redux


        step 1-04. 리덕스 설치(필수)
            react-redux : react에서 redux를 사용할 수있게 하는 라이브러리
            redux-actions : redux용 action을 정의하기 위한 라이브러리
            $ npm install --save redux react-redux redux-actions

            redux-logger : redux용 로깅 처리를 위한 미들웨어 라이브러리
            $ npm install --save redux-logger


        step 1-05. 비동기 처리(필수)
            axios : rest api 호출 라이브러리
            redux-saga : redux에서 비동기로 액션을 처리하는 미들웨어 라이브러리
            $ npm install --save redux-saga axios


        step 1-06. immer 설치(필수)
            immer : 리덕스 store state 를 불변 객체, 읽기 전용으로 처리할 때 사용되는 라이브러리
            $ npm install --save immer


        step 1-07. cross-env 설치(필수)
            cross-env: 프로젝트에서 NODE_PATH 를 사용하여 절대 경로로 파일을 불러오기 위하여 환경 변수를 설정 할 때
                        운영체제마다 방식이 다르므로 공통적인 방법으로 설정 할 수 있게 해주는 라이브러리입니다.
            $ npm install --save-dev cross-env


        step 1-08. redux-toolkit 설치(선택)
            react 17 에서는 설치시 오류 발생
            redux-devtools-extension : 스토어의 상태를 개발자 도구에서 조회 할 수 있는 크롬 확장 프로그램
            $ npm install --save-dev redux-devtools


        step 1-11. install material-ui
            안드로이드에서 사용하는 UI 기능과 디자인을 제공하는 라이브러리
            Material-UI 홈페이지 : https://material-ui.com/
            $ npm install --save  @material-ui/core  @material-ui/icons  @material-ui/pickers  @material-ui/styles


        step 1-12. install Semantic UI React
            디자인을 제고하는 라이브러리
            $ npm install --save semantic-ui-react


        step 1-13. install the Bootstrap 4
            $ npm install --save bootstrap reactstrap


        step 1-14. reselect 설치
            $ npm install --save reselect


        step 1-21. eslint 모듈
            ESlint는 문법 에러를 잡아내고 특정 문법 요소를 사용하여 코드를 수정하기 위해 사용
            $ npm install --save-dev eslint


        step 1-22. prettier 모듈
            코드를 좀 더 보기 좋게 고치는 데 사용되는 모듈
            prettier 사용되는 예시
              . 한 줄의 최대 길이는 얼마로 할 것인가?
              . 들여쓰기에 tab을 쓸 것인가? space를 쓸 것인가?
              . 문자 리터럴로  ' 를 쓸 것인가? " 쓸 것인가?
            Prettier 모듈을 설치할 때는 --save-exact 옵션을 사용하세요.
            이는 Prettier 버전이 달라져도 코드 스타일 변화가 생기지 않도록 하는 옵션입니다.
            $ npm install --save-dev --save-exact prettier


        step 1-23. 필요한 추가 모듈들
            eslint-config-prettier: Prettier와 충돌할 설정들을 비활성화합니다.
            eslint-plugin-prettier: 코드 코맷할 때 Prettier를 사용하게 만드는 규칙을 추가합니다.
            $ npm install --save-dev eslint-plugin-prettier eslint-config-prettier


        step 1-31.  프로젝트 소스 git commit 하기
            $ git commit -a -m '프로젝트 시작하기'
            $ git push


        step 1-32. react 프로젝트 설정 파일 추출하기
            package.json 파일의 내용이 변경된다.
            $ ls
            $ cat package.json
            $ npm run eject
            $ cat package.json


        step 1-33. 배포용 파일 빌드. /dist/ 폴더에 파일 만들어짐.
            $ npm run build


        step 1-34. 프로젝트 실행
            $ ls # package.json 보이는지 확인
            $ npm run start     # package.json 보이면 서버 실행


    2. 프로젝트 폴더 구조
        프로젝트
        ├─ build                    # 빌드 결과물 폴더
        ├─ node_modules             # npm 모듈(패키지) 저장 폴더
        ├─ public                   # 배포 버전을 빌드할 때 사용하는 파일.
        │   ├─ index.html
        │   └─ favion.ico
        ├─ src # 소스 코드 폴더
        │   ├─ actions (리덕스 액션함수)
        │   ├─ api (API 모듈)
        │   ├─ assets (기타 자원)
        │   │   ├─ images (이미지)
        │   │   ├─ styles (스타일시트)
        │   │   └─ text
        │   ├─ common (공통)
        │   ├─ components (프리젠테이션 컴포넌트)
        │   ├─ containers (프리젠테이션컴포넌트)
        │   │   └─ 컴포넌트명
        │   │       └─ index.js     (컴포넌트 UI )
        │   ├─ containers (컨테이너 컴포넌트)
        │   │   └─ 컴포넌트명
        │   │       ├─ action.js    (액션상수,액션함수 정의)
        │   │       ├─ index.js     (컴포넌트 UI )
        │   │       ├─ saga.js      (외부 API 호출 saga)
        │   │       └─ reducer.js   (리덕스 리듀서)
        │   ├─ constant (상수)
        │   ├─ models (데이터 모델 변수, 타입)
        │   ├─ pages (페이지 컴포넌트)
        │   ├─ reducers (리덕스의 리듀서)
        │   │   └─ index.js
        │   ├─ routes (라우팅)
        │   │   └─ index.js
        │   ├─ sagas (saga 관련 코드)
        │   │   └─ index.js
        │   ├─ store (Redux 관련 코드)
        │   │   └─ index.js
        │   ├─ styles (스타일시트)
        │   ├─ utils (유틸리티 모듈)
        │   ├─ App.css
        │   ├─ App.js
        │   ├─ App.test.js (컴포넌트 테스트를 위한 파일)
        │   └─ index.js
        ├─ babel.config.js
        ├─ package.json
        └─ README.md


    3. 프로젝트 디렉토리 및 파일 생성
        3-1. 디렉토리 생성
        $ mkdir -p ./src/actions \
                   ./src/api \
                   ./src/assets \
                   ./src/assets/images \
                   ./src/assets/styles \
                   ./src/assets/text \
                   ./src/common \
                   ./src/components \
                   ./src/containers \
                   ./src/constant \
                   ./src/models \
                   ./src/pages \
                   ./src/reducers \
                   ./src/routes \
                   ./src/sagas \
                   ./src/store \
                   ./src/utils


        3-2. 프로젝트 공통 파일 생성
        $ touch ./src/pages/index.js \
                ./src/reducers/index.js \
                ./src/routes/index.js \
                ./src/sagas/index.js \
                ./src/store/index.js \
                .eslinrc.json \
                .prettierrc.json \
                .env \
                jsconfig.json


    4. 프로젝트 환경 설정
        4-1. NODE_ENV 설정
            우리가 코드들을 불러올 때 '../components/Something' 이런식으로 불러와야 하는 코드를 'components/Something'
            이렇게 불러 올 수 있도록 프로젝트의 루트경로를 설정하겠습니다.
            package.json 파일의 script 부분을 다음과 같이 수정하세요.

            "scripts": {
              "start": "cross-env NODE_PATH=src react-scripts start",
              "build": "cross-env NODE_PATH=src react-scripts build",
              "test": "react-scripts test --env=jsdom",
              "eject": "react-scripts eject"
            }

        4-2. jsconfig.json 설정
            NODE_ENV의 절대 경로 설정.

            {
                "compilerOptions": {
                    "baseUrl": "./src"
                }
            }

        4-3. eslint 설정
            .eslinrc.json 파일을 프로젝트 루트에 만들고 아래 내용을 추가
            https://poiemaweb.com/eslinthttps://eslint.org/docs/user-guide/configuring/rules

            {
                "parserOptions": {
                  "ecmaVersion": 12
                },
                "env": {
                  "browser": true,
                  "commonjs": true,
                  "es2021": true,
                  "node": true
                },
                "globals": {
                  "_": false
                },
                "plugins": ["import", "html"],
                "extends": "airbnb-base",
                "rules": {
                  // "off" or 0 - turn the rule off
                  // "warn" or 1 - turn the rule on as a warning (doesn’t affect exit code)
                  // "error" or 2 - turn the rule on as an error (exit code is 1 when triggered)
                  // "no-var": "off",
                  "no-console": "warn",
                  "no-plusplus": "off",
                  "no-shadow": "off",
                  "vars-on-top": "off",
                  "no-underscore-dangle": "off", // var _foo;
                  "comma-dangle": "off",
                  "func-names": "off", // setTimeout(function () {}, 0);
                  "prefer-template": "off",
                  "no-nested-ternary": "off",
                  "max-classes-per-file": "off",
                  "consistent-return": "off",
                  "no-restricted-syntax": ["off", "ForOfStatement"], // disallow specified syntax(ex. WithStatement)
                  "prefer-arrow-callback": "error", // Require using arrow functions for callbacks
                  "require-await": "error",
                  "arrow-parens": ["error", "as-needed"], // a => {}
                  "no-param-reassign": ["error", { "props": false }],
                  "no-unused-expressions": ["error", {
                    "allowTernary": true,      // a || b
                    "allowShortCircuit": true, // a ? b : 0
                    "allowTaggedTemplates": true
                  }],
                  "import/no-extraneous-dependencies": ["error", { "devDependencies": true }],
                  "max-len": ["error", {
                    "code": 110,
                    "ignoreComments": true,
                    "ignoreStrings": true,
                    "ignoreTemplateLiterals": true
                  }] // prettier의 printWidth 옵션 대신 사용
                }
            }

        4-4. Prettier 설정
            .prettierrc.json 파일을 프로젝트 루트에 만들고 아래 내용을 추가
            {
              "singleQuote": true,
              "semi": true,
              "useTabs": false,
              "tabWidth": 2,
              "trailingComma": "es5",
              "printWidth": 120,
              "editor.formatOnSave": true,
              "proseWrap": "always",
              "requireConfig": false,
              "bracketSpacing": true,
              "jsxBracketSameLine": false
            }

        4-5. 환경 설정 설정
            .env 파일을 프로젝트 루트에 만들고 아래 내용을 추가
            SKIP_PREFLIGHT_CHECK=true
            PORT=15109

        4-9. 프로젝트 재실행
            실행중이면 "ctrl + c" 눌러 중지하고 다시 실행 한다
            $ ls
            $ npm run start # package.json 보이면 서버 실행


        5. 프로젝트 초기 설정.
            프로젝트의 폴더 구조
            └─ public/index.html 에 설정

            5-1. fontawesome 설정
            <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.12/css/all.css">

            5-2. ubuntu 폰트 설정
            <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu">

            5-3. index.html 에 reset.css 설정
            <link rel="stylesheet" href="%PUBLIC_URL%/reset.css">

            5-4. index.html 에 style 설정
            <style>
                .strong {color:red; font-weight:bold; font-size:1.2em;}
                label { display: inline-block; width: 80px;}
                #app > div { margin: 5px 0 ;}
            </style>

            5-5. 1차/reset.css  ~/public/ 에 복사

        6. 프로젝트 1차 구현

            6-1. 프로젝트 폴더 구조
                ├─ build                    # 빌드 결과물 폴더
                ├─ config                   #
                ├─ node_modules             # npm 모듈(패키지) 저장 폴더
                ├─ public                   # 배포 버전을 빌드할 때 사용하는 파일.
                │   ├─ favion.ico
                │   ├─ index.html
                │   ├─ logo192.png
                │   ├─ logo512.png
                │   ├─ manifest.json
                │   └─ reset.css
                │   └─ robots.txt
                ├─ scripts
                ├─ src
                │   └─ containers           # 폴더 생성
                │   │  └─ CrudApp.js
                │   └─ components           # 폴더 생성
                │   │  └─ crud              # 폴더 생성
                │   │      ├─ CrudInput.js
                │   │      ├─ CrudList.js
                │   │      └─ CrudListItem.js
                │   ├─ pages (페이지 컴포넌트)
                │   ├─ reducers (리덕스의 리듀서)
                │   │   └─ index.js
                │   ├─ routes (라우팅)
                │   │   └─ index.js
                │   ├─ sagas (saga 관련 코드)
                │   │   └─ index.js
                │   ├─ store (Redux 관련 코드)
                │   │   └─ index.js
                │   ├─ App.css
                │   ├─ App.js
                │   ├─ index.css
                │   ├─ index.js
                │   ├─ logo.svg
                │   └─ serviceWorker.js
                ├─ .enc
                ├─ .gitignore
                ├─ package.json
                └─ README.md

            6-2. 컴포넌트 생성
                $ mkdir ~/src/containers
                $ touch ~/src/containers/CrudApp.js
                $ mkdir ~/src/components
                $ mkdir ~/src/components/crud
                $ touch ~/src/components/crud/CrudInput.js
                $ touch ~/src/components/crud/CrudList.js
                $ touch ~/src/components/crud/CrudListItem.js

            6-3. 컴포넌트 구현
                $ ~/src/containers/CrudApp.js 수정
                    import React, { Component } from 'react';
                    import CrudInput from './CrudInput';
                    import CrudList from './CrudList';
                    ...중략
                    export default CrudApp;

                $ ~/src/components/crud/CrudInput.js
                    import React, { Component } from 'react';
                    ...중략
                    export default CrudInput;

                $ ~/src/components/CrudList.js 수정
                    import React, { Component } from 'react';
                    import CrudListItem from './CrudListItem';
                    ...중략
                    export default CrudList;

                $ ~/src/components/crud/CrudListItem.js
                    import React, { Component } from 'react';
                    ...중략
                    export default CrudListItem;

            6-4. 라우팅 설정
                $ ~/src/index.js 수정
                변경 전 : import App from './App';
                변경 후 : import App from './containers/CrudApp';

    </xmp>

</body>
</html>